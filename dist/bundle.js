!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).timeTree=r()}(this,(function(){"use strict";function t(t,r){for(var e=0;e<r.length;e++){var a=r[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(){function r(t){var e=t.startDate,a=t.endDate,n=t.span,s=void 0===n?1:n;!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),this.startDate=this.toDateObj(e),this.endDate=this.toDateObj(a),this.span=s,this.startYear=this.startDate.getFullYear(),this.startMonth=this.startDate.getMonth()+1,this.startDay=this.startDate.getDate(),this.startHour=this.startDate.getHours(),this.startMinutes=this.startDate.getMinutes(),this.endYear=this.endDate.getFullYear(),this.endMonth=this.endDate.getMonth()+1,this.endDay=this.endDate.getDate(),this.endHour=this.endDate.getHours(),this.endMinutes=this.endDate.getMinutes(),this.yearArr=[],this.monthArr={},this.dayArr={},this.hourArr={},this.minuteArr={},this.init()}var e,a,n;return e=r,(a=[{key:"init",value:function(){this.yearArr=this.getYearArr(),this.monthArr=this.getMonthArr(),this.dayArr=this.getDayArr(),this.hourArr=this.getHourArr(),this.minuteArr=this.getMinuteArr()}},{key:"getYearArr",value:function(){for(var t=[],r=this.startYear;r<=this.endYear;r++)t.push(r);return t}},{key:"getMonthArr",value:function(){var t=this,r={};return this.yearArr.forEach((function(e){if(r[e]=[],t.startYear==t.endYear)for(var a=t.startMonth;a<=t.endMonth;a++)r[e].push(a);else if(e==t.startYear)for(var n=t.startMonth;n<=12;n++)r[e].push(n);else if(e==t.endYear)for(var s=1;s<=t.endMonth;s++)r[e].push(s);else for(var i=1;i<=12;i++)r[e].push(i);r[e].length||delete r[e]})),r}},{key:"getDayArr",value:function(){var t=this,r={},e=function(e){var a=parseInt(e),n=a%4==0&&a%100!=0||a%400==0;r[e]={},t.monthArr[e].forEach((function(a){r[e][a]=[];var s=null;if(1!==a&&3!==a&&5!==a&&7!==a&&8!==a&&10!==a&&12!==a||(s=31),4!==a&&6!==a&&9!==a&&11!==a||(s=30),2===a&&(s=n?29:28),t.startYear==t.endYear&&t.startMonth==t.endMonth)for(var i=t.startDay;i<=t.endDay;i++)r[e][a].push(i);else if(e==t.startYear&&a==t.startMonth)for(var o=t.startDay;o<=s;o++)r[e][a].push(o);else if(e==t.endYear&&a==t.endMonth)for(var h=1;h<=t.endDay;h++)r[e][a].push(h);else for(var u=1;u<=s;u++)r[e][a].push(u);r[e][a].length||delete r[e][a]}))};for(var a in this.monthArr)e(a);return r}},{key:"getHourArr",value:function(){var t=this,r={},e=function(e){r[e]={};var a=function(a){r[e][a]={},t.dayArr[e][a].forEach((function(n){if(r[e][a][n]=[],t.startYear==t.endYear&&t.startMonth==t.endMonth&&t.startDay==t.endDay)for(var s=t.startHour;s<=t.endHour;s++)r[e][a][n].push(s);else if(e==t.startYear&&a==t.startMonth&&n==t.startDay)for(var i=t.startHour;i<=23;i++)r[e][a][n].push(i);else if(e==t.endYear&&a==t.endMonth&&n==t.endDay)for(var o=1;o<=t.endHour;o++)r[e][a][n].push(o);else for(var h=0;h<=23;h++)r[e][a][n].push(h);r[e][a][n].length||delete r[e][a][n]}))};for(var n in t.dayArr[e])a(n)};for(var a in this.dayArr)e(a);return r}},{key:"getMinuteArr",value:function(){var t=this,r={},e=Math.round(Math.ceil(this.startMinutes/this.span)*this.span),a=Math.round(Math.floor(this.endMinutes/this.span)*this.span),n=function(n){r[n]={};var s=function(s){r[n][s]={};var i=function(i){r[n][s][i]={},t.hourArr[n][s][i].forEach((function(o){if(r[n][s][i][o]=[],t.startYear==t.endYear&&t.startMonth==t.endMonth&&t.startDay==t.endDay&&t.startHour==t.endHour)for(var h=e;h<=a;h+=t.span)r[n][s][i][o].push(h);else if(n==t.startYear&&s==t.startMonth&&i==t.startDay&&o==t.startHour)for(var u=e;u<=59;u+=t.span)r[n][s][i][o].push(u);else if(n==t.endYear&&s==t.endMonth&&i==t.endDay&&o==t.endHour)for(var f=0;f<=a;f+=t.span)r[n][s][i][o].push(f);else for(var d=0;d<=59;d+=t.span)r[n][s][i][o].push(d);r[n][s][i][o].length||delete r[n][s][i][o]}))};for(var o in t.hourArr[n][s])i(o)};for(var i in t.hourArr[n])s(i)};for(var s in this.hourArr)n(s);return r}},{key:"toDateObj",value:function(t){var r=t;return"string"==typeof t&&(r=t.replace(/-/g,"/")),new Date(r)}}])&&t(e.prototype,a),n&&t(e,n),r}()}));
